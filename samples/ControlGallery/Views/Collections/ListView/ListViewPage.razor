@using System.Collections.ObjectModel;

<ContentPage Title="ListView">
    <ToolbarItems>
        <ToolbarItem Text="Add" OnClick="AddItem" />
    </ToolbarItems>

    <ChildContent>

        <ListView ItemsSource="items" SelectionMode="ListViewSelectionMode.None">
            <ItemTemplate>
                <ImageCell Text="@context.Name" Detail="@context.Type" ImageSource="@context.ImageUrl">
                    <ContextActions>
                        <MenuItem Text="Remove" IsDestructive="true" OnClick="() => RemoveItem(context)" />
                    </ContextActions>
                </ImageCell>
            </ItemTemplate>
        </ListView>

    </ChildContent>
</ContentPage>

@code {
    ObservableCollection<Weapon> items = new(Weapons.Items);

    int itemIndex;
    void AddItem()
    {
        items.Add(new Weapon($"Mega gun {itemIndex++}", "Custom", null));
    }

    void RemoveItem(Weapon item)
    {
        items.Remove(item);
    }
}
